<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Servicios de reparaci√≥n y proyectos de construccion">
    <meta name="robots" content="index, follow">
    <link rel="stylesheet" href="estilos.css">
    <!-- Enlazar el archivo servicios.js -->
    <script src="../js/servicios.js" defer></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
        integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js"
        integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy"
        crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <!-- Incluye la CDN de la versi√≥n gratuita de Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <title>ToolBox</title>
    <link rel="icon" href="/imagenes/Logo.svg">
    <script src="../js/navbar_cliente.js" defer></script>
    <script src="../js/footer_cliente.js" defer></script>
    <script src="form.js" defer></script>
</head>

<body>
    <!-- Hero -->
    <div class="container-fluid" style="width: 100%;">
        <figure class="figure my-4" style="width: 100%;">
            <img src="/imagenes/fondo-1.jpg" class="img-fluid rounded" id="hero-img-cliente" alt="...">
            <div class="justify-content-center align-items-center px-5" id="container-text-hero-cliente">
                <div class="title-hero-cliente">
                    <h1>Encuentra en <span class="text-warning">TOOLBOX</span> profesionales de confianza para tus
                        reparaciones en casa o para tus proyectos de construcci√≥n </h1>
                </div>
                <div class="container-busqueda-cliente">
                    <!-- Barra de B√∫squeda de Servicios -->
                    <div class="search-container d-flex">
                        <img src="/imagenes/avance-rapido.png" class="w-15 me-4" height="30" alt="">
                        <div>
                            <h4 class="subtitle-hero-cliente pb-2">¬øNecesitas un t√©cnico especializado para alg√∫n
                                servicio espec√≠fico?</h4>
                            <p class="text-hero-cliente text-start text-muted fw-semibold mb-4">Podr√°s encontrar una
                                variedad de servicios en los que podr√°s
                                contratar
                                t√©cnicos especializados para tus servicios de hogar u otros.</p>
                            <form id="serviceSearchForm" class="form-busqueda-cliente">
                                <input type="text" id="searchServiceInput" class="form-control text-center ps-5"
                                    list="datalistOptionsCliente" placeholder="¬øQu√© servicio solicitas?"
                                    aria-label="¬øQu√© servicio solicitas?">
                                <datalist id="datalistOptionsCliente">
                                    <option value="Plomer√≠a">
                                    <option value="Electricidad">
                                    <option value="Carpinter√≠a">
                                    <option value="Enchape y acabados">
                                    <option value="Estructuras Met√°licas">
                                    <option value="Pintura y acabados">
                                    <option value="Cerrajer√≠a">
                                    <option value="Refrigeraci√≥n y aire acondicionado">
                                    <option value="Jardiner√≠a y paisajismo">
                                    <option value="Obras Civiles">
                                </datalist>
                                <button id="searchServiceBtn" type="submit" class="btn btn-warning">
                                    <img src="/imagenes/buscar.png" alt="Buscar" height="20">
                                </button>
                            </form>
                        </div>
                    </div>
                    <!-- üìå Secci√≥n para Publicar Nueva Solicitud -->
                    <div class="seccion-publicar">
                        <img src="/imagenes/avance-rapido.png" class="w-15 me-4" height="30" alt="">
                        <div>
                            <h4 class="subtitle-hero-cliente mb-3"><i></i> ¬øNecesitas publicar una
                                solicitud
                                de arreglo o reparacion en tu hogar?</h4>
                            <p class="text-muted text-start text-hero-cliente fw-semibold mb-4">Publica tu solicitud y
                                un t√©cnico
                                especializado podr√° aceptarla.</p>
                            <div class="text-center pe-3"><a href="#" id="btnEmpezar"><button type="button"
                                        class="btn-empezar text-center px-4 py-2 fw-semibold">Empezar</button></a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </figure>
    </div>
    <!-- Secci√≥n de Servicios con √çconos, Botones y Links -->
    <div class="container mt-5" id="servicios">
        <h3 class="mb-4">Servicios Disponibles</h3>
        <div class="row" id="servicesContainer"></div>
    </div>
    <!-- Bot√≥n de Chatea con nosotros -->
    <a href="https://wa.me/573001234567?text=Hola%20me%20interesa%20conocer%20m√°s%20sobre%20sus%20servicios"
        class="chat-button fw-semibold pb-2" target="_blank">
        <img src="/imagenes/whatsapp.png" alt="Chatea con nosotros" />
        <small>¬°Chatea con nosotros!</small>
    </a>
</body>
<script>
    document.addEventListener("DOMContentLoaded", async () => {
        const btnEmpezar = document.getElementById("btnEmpezar");

        try {
            const response = await fetch("/api/cliente/perfil", {
                method: "GET",
                credentials: "include"
            });

            if (response.ok) {
                // Cliente autenticado ‚Üí redirige a publicar solicitud
                btnEmpezar.href = "/formularioPublicacionCliente";
            } else {
                // No autenticado ‚Üí redirige a registro
                btnEmpezar.href = "/form-cliente";
            }
        } catch (error) {
            console.error("‚ùå Error verificando sesi√≥n del cliente:", error);
            // En caso de error, por defecto al registro
            btnEmpezar.href = "/form-cliente";
        }
    });

</script>

</html>