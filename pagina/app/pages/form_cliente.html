<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Servicios de reparación y proyectos de construccion">
    <meta name="robots" content="index, follow">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
        integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js"
        integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy"
        crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <title>Registro</title>
    <link rel="icon" href="/imagenes/Logo.svg">
    <link rel="stylesheet" href="estilos.css">
    <script src="../js/navbar_cliente.js" defer></script>
    <script src="../js/footer_cliente.js" defer></script>
    <script src="form.js" defer></script>
</head>

<body>
    <!-- formulario -->
    <div class="form-container">
        <h2 class="text-center text-warning mb-4">Empecemos creando tu perfil</h2>
        <!-- Campos para Cliente -->
        <form id="register-form-cliente">
            <!--Política de tratamiento de datos-->
            <div class="form-check my-3">
                <input class="form-check-input policy-check" type="checkbox" id="aceptoPolitica" required>
                <label class="form-check-label" for="aceptoPolitica">
                    He leído y acepto la
                    <a href="#" data-bs-toggle="modal" data-bs-target="#politicaModal">Política de Tratamiento de Datos
                        Personales</a>.
                </label>
                <div class="invalid-feedback">Debes aceptar la política para continuar.</div>
            </div>
            <div id="client" class="">
                <div class="mb-2">
                    <!-- Nombre -->
                    <label for="userNameCliente" class="form-label">Nombres</label>
                    <input type="text" class="form-control" name="userNameCliente" id="userNameCliente"
                        placeholder="Ingresa nombres" required>
                    <!-- Apellido -->
                    <label for="surnameCliente" class="form-label">Apellidos</label>
                    <input type="text" class="form-control" name="surnameCliente" id="surnameCliente"
                        placeholder="Ingresa apellidos" required>
                    <!-- correo -->
                    <label for="emailUserCliente" class="form-label">Correo</label>
                    <input type="text" class="form-control" name="emailUserCliente" id="emailUserCliente"
                        placeholder="name@example.com">
                    <!-- Contraseña -->
                    <label for="passwordCliente" class="col-form-label">Contraseña</label>
                    <div class="input-group">
                        <input type="password" name="passwordCliente" id="passwordCliente" class="form-control"
                            aria-describedby="passwordHelpInline" minlength="8" maxlength="20" required>
                        <button type="button" class="btn btn-outline-secondary toggle-password"
                            data-target="passwordCliente">
                            <i class="fas fa-eye"></i>
                        </button>
                    </div>
                    <div class="form-text" id="passwordHelpInline">
                        Debe tener entre 8-20 caracteres.
                    </div>

                    <!-- telefono -->
                    <label for="telCliente" class="form-label my-2">Teléfono</label>
                    <input type="number" class="form-control" name="telCliente" id="telCliente"
                        placeholder="Ingresa teléfono" required>
                    <!-- direccion -->
                    <label for="dirCliente" class="form-label my-2">Dirección</label>
                    <input type="text" class="form-control" name="dirCliente" id="dirCliente"
                        placeholder="ingresa la direccion de residencia">
                </div>
                <p id="error" class="text-danger hidden">Error en el registro, el correo ya existe</p>
                <button type="submit" class="btn btn-warning w-100">Crear Perfil</button>
            </div>
        </form>

    </div>
    <!-- Botón de Chatea con nosotros -->
    <a href="https://wa.me/573001234567?text=Hola%20me%20interesa%20conocer%20más%20sobre%20sus%20servicios"
        class="chat-button fw-semibold pb-2" target="_blank">
        <img src="/imagenes/whatsapp.png" alt="Chatea con nosotros" />
        <small>¡Chatea con nosotros!</small>
    </a>
    <div class="modal fade" id="politicaModal" tabindex="-1" aria-labelledby="politicaLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg modal-dialog-scrollable">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="politicaLabel">Política de Tratamiento de Datos Personales - TOOLBOX
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
                </div>

                <div class="modal-body">
                    <!-- Enlace al PDF (ajusta la ruta si la sirves desde otra carpeta) -->
                    <p class="mb-2">
                        Puedes descargar la versión en PDF aquí:
                        <a href="/docs/politica-tratamiento-datos-toolbox.pdf" target="_blank" rel="noopener">Descargar
                            PDF</a>
                    </p>

                    <!-- Contenido scrollable (resumen fiel del PDF) -->
                    <div style="max-height: 60vh; overflow:auto; padding-right: .25rem">
                        <h6>1. Identificación del responsable</h6>
                        <p><strong>TOOLBOX</strong> — NIT: 1001185545-0 — Correo: toolboxencontacto@gmail.com —
                            Dirección: Cra 9 #19-27 — Tel: 3133847392</p>

                        <h6>2. Marco legal</h6>
                        <p>Ley 1581 de 2012, Decreto 1377 de 2013 y demás normas aplicables en Colombia.</p>

                        <h6>3. Finalidades</h6>
                        <ul>
                            <li>Facilitar contacto entre clientes y aliados técnicos.</li>
                            <li>Gestionar registros, suscripciones y accesos.</li>
                            <li>Procesar pagos, facturación y transacciones internas.</li>
                            <li>Comunicar novedades, promociones y actualizaciones.</li>
                            <li>Realizar encuestas, calificaciones o recomendaciones.</li>
                            <li>Cumplir obligaciones legales y contractuales.</li>
                        </ul>

                        <h6>4. Datos recogidos</h6>
                        <ul>
                            <li>Nombre, documento, teléfono, correo, dirección/ubicación.</li>
                            <li>Experiencia/certificaciones (aliados), fotos, videos.</li>
                            <li>Datos técnicos de conexión (IP, dispositivo, ubicación).</li>
                        </ul>

                        <h6>5. Derechos del titular</h6>
                        <ul>
                            <li>Conocer, actualizar y rectificar datos.</li>
                            <li>Solicitar prueba de autorización.</li>
                            <li>Ser informado del uso de sus datos.</li>
                            <li>Presentar quejas ante la SIC.</li>
                            <li>Revocar autorización y/o solicitar supresión.</li>
                        </ul>

                        <h6>6. Medidas de seguridad</h6>
                        <p>Medidas físicas, administrativas y tecnológicas razonables. No se responde por accesos no
                            autorizados
                            causados por terceros mediante acciones ilegales.</p>

                        <h6>7. Transferencia/Transmisión a terceros</h6>
                        <p>Posible con aliados estratégicos (pasarela de pagos, mensajería, marketing) solo para operar
                            la plataforma.</p>

                        <h6>8. Consultas y reclamos</h6>
                        <p>Escribir a <strong>toolboxencontacto@gmail.com</strong>. Respuesta en máximo 15 días hábiles.
                        </p>

                        <h6>9. Vigencia</h6>
                        <p>Rige desde su publicación. TOOLBOX puede actualizarla y lo informará por sus canales
                            oficiales.</p>
                    </div>
                </div>

                <div class="modal-footer">
                    <button id="aceptarPoliticaBtn" type="button" class="btn btn-warning">Acepto y continuar</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", () => {
            function validarCorreo(email) {
                const emailPattern = /^[^@]+@[^@]+\.[a-zA-Z]{2,}$/;
                return emailPattern.test(email);
            }

            document.getElementById("register-form-cliente").addEventListener("submit", (e) => {
                e.preventDefault();

                const emailInput = document.getElementById("emailUserCliente");
                const email = emailInput.value.trim();

                if (!validarCorreo(email)) {
                    alert("Por favor ingrese un correo electrónico válido.");
                    emailInput.focus();
                    return;
                }
            });
        });
        // Soporta un checkbox por formulario o varios (cliente/aliado) en una misma página
        document.addEventListener("DOMContentLoaded", () => {
            const modalEl = document.getElementById("politicaModal");
            const aceptarBtn = document.getElementById("aceptarPoliticaBtn");

            // Todas las casillas de aceptación que encuentre
            const checks = document.querySelectorAll(".policy-check");

            // Al hacer clic en "Acepto y continuar", marca todos los checks visibles y cierra el modal
            aceptarBtn?.addEventListener("click", () => {
                checks.forEach(chk => { chk.checked = true; chk.dispatchEvent(new Event("change")); });
                const modal = bootstrap.Modal.getInstance(modalEl) || new bootstrap.Modal(modalEl);
                modal.hide();
            });

            // Bloquea el envío si no han aceptado (por seguridad extra, además del required HTML)
            document.querySelectorAll("form").forEach(form => {
                form.addEventListener("submit", (e) => {
                    const policy = form.querySelector(".policy-check");
                    if (policy && !policy.checked) {
                        e.preventDefault();
                        e.stopPropagation();
                        policy.focus();
                        form.classList.add("was-validated");
                    }
                });
            });
        });
        document.addEventListener("DOMContentLoaded", () => {
            document.querySelectorAll(".toggle-password").forEach(btn => {
                btn.addEventListener("click", () => {
                    const inputId = btn.getAttribute("data-target");
                    const input = document.getElementById(inputId);
                    const icon = btn.querySelector("i");

                    if (input.type === "password") {
                        input.type = "text";
                        icon.classList.remove("fa-eye");
                        icon.classList.add("fa-eye-slash");
                    } else {
                        input.type = "password";
                        icon.classList.remove("fa-eye-slash");
                        icon.classList.add("fa-eye");
                    }
                });
            });
        });
    </script>
</body>

</html>